import{g as t}from"./vendor.3b914477.js";class e{constructor(){this._seed=""}get(e){return this._seed===e&&this._noise||(this._noise=new t(e),this._seed=e),this._noise}}const a=self;function n(t,e,a){const n=t.get(a.seed);let s={ctx:e,noiseFn:function(t,e){return n.noise3D(t/10,e/10,1)},params:a.genParams};e.clearRect(0,0,e.canvas.width,e.canvas.height);let i=function(t){const{ctx:e,noiseFn:a,params:{n1:n,n2:s,distortion:i,dotDiameter:o}}=t;let c=-20,r=o/2,d=e.canvas.width,l=e.canvas.height,h=new Path2D;for(let g=c;g<l-c;g++)for(let t=c;t<d-c;t++){let e=t*(o+1)+0+.5+r,c=g*(o+1)+0+.5+r,d=e+i*a(e/n,c/s),l=c+i*a(e/s,c/n);h.rect(d,l,1,1)}return[h]}(s);e.fillStyle=a.color,e.fill(i[0])}!function(){let t,s,i=new e,o={};a.onmessage=e=>{if(console.log("Worker got",e.data),"init"===e.data.type)return t=e.data.canvas,void(s=t.getContext("2d"));if(s)if("run"===e.data.type&&e.data.canvasWidth&&e.data.canvasHeight&&(s.canvas.width=e.data.canvasWidth,s.canvas.height=e.data.canvasHeight),s.canvas.width&&s.canvas.height)switch(e.data.type){case"run":o=e.data.renderParams,n(i,s,o);break;case"get-preview":{let n=e.data.smallWidth,s=e.data.smallHeight;const i=new OffscreenCanvas(n,s),c=i.getContext("2d");if(c){let e=Math.min(t.width,t.height);c.drawImage(t,0,0,e,e,0,0,n,s),i.convertToBlob().then((function(t){a.postMessage({type:"preview-blob",blob:t,renderParams:o})}))}break}}else console.log("no canvas size yet");else console.log("no ctx yet")}}();
